<div class="d-flex" id="wrapper" [class.sidebar-collapsed]="isSidebarCollapsed">
  <!-- Sidebar -->
  <nav id="sidebar" class="bg-dark text-white sidebar p-3" [class.collapsed]="isSidebarCollapsed">
    <div class="sidebar-header d-flex justify-content-between align-items-center">
      <div class="d-flex align-items-center">
        <img src="../../../../assets/icons/wzlogo.png" alt="Logo" width="32" height="32" class="me-2">
        <span class="fw-bold fs-5">RMTL Laboratory</span>
      </div>
    </div>
    <hr style="border-bottom: 3px solid #0eea69;">
    
    <div class="sidebar-heading text-white-50 px-3">METER MANAGEMENT</div>
    <ul class="list-unstyled">
      <li>
        <a class="text-white d-flex justify-content-between align-items-center text-decoration-none"
           (click)="toggleCollapse('menu1')"
           role="button">
          <span><i class="fas fa-user me-2"></i> User Management</span>
          <i class="fa" [ngClass]="{'fa-chevron-down': !menu1Collapsed, 'fa-chevron-up': menu1Collapsed}"></i>
        </a>
        <ul class="list-unstyled ps-4 mt-2 collapse" [class.show]="!menu1Collapsed">
          <li><a class="text-white d-block py-1 text-decoration-none" href="#"><i class="fas fa-circle-notch pe-2 small"></i>Create New User</a></li>
          <li><a class="text-white d-block py-1 text-decoration-none" href="#"><i class="fas fa-circle-notch pe-2 small"></i>Update User Details</a></li>
          <li><a class="text-white d-block py-1 text-decoration-none" href="#"><i class="fas fa-circle-notch pe-2 small"></i>DeActivate User</a></li>
        </ul>
      </li>
      
      <li class="mt-2">
        <a class="text-white d-flex justify-content-between align-items-center text-decoration-none"
           (click)="toggleCollapse('menu2')"
           role="button">
          <span><i class="fas fa-window-maximize me-2"></i> User Assignments</span>
          <i class="fa" [ngClass]="{'fa-chevron-down': !menu2Collapsed, 'fa-chevron-up': menu2Collapsed}"></i>
        </a>
        <ul class="list-unstyled ps-4 mt-2 collapse" [class.show]="!menu2Collapsed">
          <li><a class="text-white d-block py-1 text-decoration-none" href="#"><i class="fas fa-circle-notch pe-2 small"></i>User Assignments Status</a></li>
          <li><a class="text-white d-block py-1 text-decoration-none" href="#"><i class="fas fa-circle-notch pe-2 small"></i>Meters Assign to Users</a></li>
          <li><a class="text-white d-block py-1 text-decoration-none" href="#"><i class="fas fa-circle-notch pe-2 small"></i>Change User Assignments</a></li>
          <li><a class="text-white d-block py-1 text-decoration-none" href="#"><i class="fas fa-circle-notch pe-2 small"></i>Remove User Assignments</a></li>
          <li><a class="text-white d-block py-1 text-decoration-none" href="#"><i class="fas fa-circle-notch pe-2 small"></i>View Assignments History</a></li>
        </ul>
      </li>
    </ul>
  </nav>

  <!-- Main Content -->
  <div id="page-content-wrapper" class="w-100">
    <nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm px-3">
      <button class="btn btn-outline-secondary me-3" (click)="toggleSidebar()">
        <i class="fa fa-bars"></i>
      </button>
      <div class="collapse navbar-collapse justify-content-between">
        <ul class="navbar-nav">
          <li class="nav-item"><a class="nav-link" routerLink="/" routerLinkActive="active">Dashboard</a></li>
        </ul>

        <!-- User Profile Dropdown -->
        <div class="dropdown me-3" [class.show]="dropdownOpen">
          <button class="btn btn-outline-danger d-flex align-items-center" type="button" 
                  (click)="toggleDropdown()" [attr.aria-expanded]="dropdownOpen">
            <i class="fa fa-user-circle fa-lg me-2"></i>
            <span class="d-none d-sm-inline">Account</span>
            <i class="fa fa-chevron-down ms-2 small"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-start mt-3" [class.show]="dropdownOpen" (mouseleave)="closeDropdown()">
            <li>
              <a class="dropdown-item d-flex justify-content-between align-items-center" routerLink="/profile">
                <span>Profile</span>
                <i class="fa fa-user"></i>
              </a>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li>
              <a class="dropdown-item d-flex justify-content-between align-items-center" (click)="logout()">
                <span>Logout</span>
                <i class="fa fa-sign-out-alt"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    
    <!-- Routed Content -->
    <main class="p-4">
      <router-outlet></router-outlet>
    </main>
  </div>
</div>