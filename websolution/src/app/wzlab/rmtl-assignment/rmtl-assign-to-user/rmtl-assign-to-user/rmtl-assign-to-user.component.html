<div class="container-fluid mt-4">
  <div class="card shadow">
        <div class="card-header text-white" style=" background-color:#151433; color: rgb(242, 236, 236); font-weight: bold;">
      <h5 class="mb-0"><i class="fas fa-list me-2"></i>Assign Device to Testing Users</h5>
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-md-6">
          <!-- Inward No -->
          <div class="mb-3">
            <label class="form-label fw-bold">Inward No</label>
            <select class="form-select" [(ngModel)]="selectedInward" name="inward">
              <option *ngFor="let inw of inward_nos" [value]="inw">{{ inw }}</option>
            </select>
          </div>
        </div>
        <div class="col-md-6">
          <!-- Device Status -->
          <div class="mb-3">
            <label class="form-label fw-bold">Device Status</label>
            <select class="form-select" [(ngModel)]="selectedStatus" name="status" (change)="filterDevices()">
              <option *ngFor="let status of device_statuses" [value]="status">{{ status }}</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Devices Table -->
      <div class="table-responsive">
        <table class="table table-bordered table-hover">
          <thead class="table-light">
            <tr>
              <th><input type="checkbox" (change)="toggleAllDevices($event)" /></th>
              <th>#</th>
              <th>Device Name</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let device of filteredDevices; let i = index">
              <td>
                <input type="checkbox" [(ngModel)]="device.selected" name="chk{{ i }}">
              </td>
              <td>{{ i + 1 }}</td>
              <td>{{ device.name }}</td>
              <td>{{ device.status }}</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Assign Button -->
      <div class="mt-3 text-end">
        <button class="btn btn-success" (click)="openAssignModal()" [disabled]="!hasSelectedDevices()">
          <i class="fas fa-user-plus"></i> Assign Selected
        </button>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal fade" id="assignModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content border-0 shadow">
        <div class="modal-header bg-dark text-white">
          <h5 class="modal-title"><i class="fas fa-user"></i> Assign Devices</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <label class="form-label fw-bold">Select User</label>
          <select class="form-select" [(ngModel)]="assignedUser">
            <option *ngFor="let user of users" [value]="user">{{ user }}</option>
          </select>
        </div>
        <div class="modal-footer">
          <button class="btn btn-success" (click)="submitAssignment()">Submit</button>
          <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        </div>
      </div>
    </div>
  </div>
</div>
